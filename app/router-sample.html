<html>
	<head>
		<script src="http://cdn.ractivejs.org/latest/ractive.js"></script>
	</head>

	<body>
		
		<script id="template" type="text/ractive">
			{{#each list}}
				<input type="radio" name="{{name}}" value="{{.}}">{{.}}
			{{/each}}
			<br>
			<dynamic name="{{name}}">
		</script>


		<script type="text/javascript">
			Ractive.components.a = Ractive.extend({ template: 'I am A {{foo}}' });
			Ractive.components.b = Ractive.extend({ template: 'I am B {{foo}}' });
			Ractive.components.c = Ractive.extend({ template: 'I am C {{foo}}' });

			Ractive.components.dynamic = Ractive.extend({
				template: '<component/>',
				components: {
					component: function() {
						console.log('Component:', this.get('name'));
						return this.get('name');
					}
				},
				oninit: function() {
					this.observe('name', function() {
						console.log('Name has changed!');
						this.reset();
					}, { init: false });
				}
			});

			var r = new Ractive({
				el: document.body,
				template: '#template',
				data: {
					foo: 'foorby',
					list: ['a','b','c'],
					name: 'a'
				}
			});
		</script>

	</body>

</html>
